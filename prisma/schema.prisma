// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Link {
  id          Int      @id @default(autoincrement())
  title       String
  url         String
  description String?
  category    String   @default("General")
  isRecommended Boolean @default(false)
  createdAt   DateTime @default(now())
}

model Category {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  sortOrder Int      @default(0) // 数字越小排越前，或者反过来，我们定为：数字越大排越前
}

model GlobalConfig {
  id    Int    @id @default(autoincrement())
  key   String @unique // 例如: "announcement"
  value String // 存储公告内容
}

model SmartWallpaper {
  id        Int      @id @default(autoincrement())
  name      String   @unique // 主题名称，如 "默认风景", "二次元", "极简"
  morning   String   // 存 JSON 字符串或用逗号分隔的 URL
  afternoon String
  night     String
  createdAt DateTime @default(now())
}

// 公告历史记录表
model AnnouncementHistory {
  id        Int      @id @default(autoincrement())
  content   String   // 历史内容
  createdAt DateTime @default(now()) // 存档时间
}

// 博客文章模型
model Post {
  id        Int      @id @default(autoincrement())
  title     String
  content   String
  summary   String?
  published Boolean  @default(false)
  
  // ✨ 新增：格式标记 (默认 true 使用 Markdown)
  isMarkdown Boolean @default(true) 
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}